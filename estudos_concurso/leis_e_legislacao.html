<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizador Interativo: Organização da Administração Pública Brasileira</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free/css/all.min.css">
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <!-- Heroicons for SVG icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .content-section { display: none; }
        .content-section.active { display: block; animation: fadeIn 0.5s; }
        .nav-button { transition: all 0.2s ease-in-out; position: relative; }
        .nav-button.active { background: linear-gradient(90deg, #1e3a8a 60%, #f59e42 100%); color: white; box-shadow: 0 2px 8px #1e3a8a22; }
        .nav-button:not(.active):hover { background-color: #e0f2fe; }
        .nav-button.active::after { content: ''; position: absolute; left: 50%; bottom: -6px; transform: translateX(-50%); width: 60%; height: 3px; background: linear-gradient(90deg, #f59e42 0%, #1e3a8a 100%); border-radius: 2px; }
        .concept-card { transition: transform 0.3s, box-shadow 0.3s; }
        .concept-card:hover { transform: translateY(-5px) scale(1.03); box-shadow: 0 6px 24px #f59e4222; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 350px; max-height: 450px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .diagram-box { border: 2px solid #94a3b8; border-radius: 0.75rem; padding: 1.2rem; text-align: center; cursor: pointer; transition: all 0.2s; background: linear-gradient(135deg, #f0f9ff 60%, #fef3c7 100%); box-shadow: 0 2px 8px #1e3a8a11; }
        .diagram-box:hover { border-color: #1e3a8a; background: linear-gradient(135deg, #fef3c7 60%, #f0f9ff 100%); }
        .diagram-connector { flex-grow: 1; background-color: #94a3b8; height: 2px; }
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(30,58,138,0.7); display: flex; align-items: center; justify-content: center; z-index: 50; }
        .modal-content { background-color: white; padding: 2rem; border-radius: 0.75rem; max-width: 95%; width: 800px; max-height: 90vh; overflow-y: auto; box-shadow: 0 8px 32px #1e3a8a33; position: relative; }
        .close-modal-btn { position: absolute; top: 1rem; right: 1rem; background: none; border: none; font-size: 1.5rem; color: #1e3a8a; cursor: pointer; }
        .tooltip { position: relative; cursor: pointer; }
        .tooltip .tooltip-text { visibility: hidden; width: 220px; background: #1e3a8a; color: #fff; text-align: center; border-radius: 0.5rem; padding: 0.5rem; position: absolute; z-index: 100; bottom: 125%; left: 50%; transform: translateX(-50%); opacity: 0; transition: opacity 0.3s; font-size: 0.95rem; }
        .tooltip:hover .tooltip-text { visibility: visible; opacity: 1; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px);} to { opacity: 1; transform: none; } }
        .study-tips { background: linear-gradient(90deg, #fef3c7 60%, #f0f9ff 100%); border-left: 6px solid #f59e42; }
        .no-js-message { display: block; background: #f59e42; color: #1e3a8a; padding: 1rem; text-align: center; font-weight: bold; border-radius: 0.5rem; margin: 1rem 0; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
<noscript>
    <div class="no-js-message">Este site requer JavaScript para funcionar corretamente. Por favor, ative o JavaScript no seu navegador.</div>
</noscript>
    <div id="app" class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-10">
            <div class="flex justify-center items-center gap-3 mb-2">
                <span class="inline-flex items-center justify-center w-14 h-14 rounded-full bg-gradient-to-tr from-blue-800 to-amber-400 shadow-lg">
                    <i data-feather="layers" class="text-white" style="width:2.2rem;height:2.2rem;"></i>
                </span>
                <h1 class="text-3xl md:text-4xl font-bold text-slate-900">A Arquitetura do Estado Brasileiro</h1>
            </div>
            <p class="text-slate-600 mt-2 text-lg">Guia Interativo sobre a Organização da Administração Pública</p>
        </header>
        <nav class="flex flex-wrap justify-center gap-2 mb-10">
            <button data-target="dashboard" class="nav-button active font-semibold py-2 px-4 border border-slate-300 rounded-lg">Visão Geral</button>
            <button data-target="principios" class="nav-button font-semibold py-2 px-4 border border-slate-300 rounded-lg">Princípios (LIMPE)</button>
            <button data-target="comparativo" class="nav-button font-semibold py-2 px-4 border border-slate-300 rounded-lg">Comparativo Interativo</button>
            <button data-target="conceitos" class="nav-button font-semibold py-2 px-4 border border-slate-300 rounded-lg">Técnicas de Organização</button>
        </nav>
        <main>
            <!-- SEÇÃO VISÃO GERAL (DASHBOARD) -->
            <section id="dashboard" class="content-section active">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold mb-2">Estrutura da Administração Pública</h2>
                    <p class="max-w-3xl mx-auto text-slate-600">Esta é a arquitetura do Estado. A Administração Pública é dividida em Direta e Indireta, e ainda colabora com entidades do Terceiro Setor. Clique em qualquer um dos blocos para aprender mais sobre seus componentes e funcionamento.</p>
                </div>
                <div class="flex flex-col items-center">
                    <!-- Bloco Central: Administração Pública -->
                    <div class="bg-gradient-to-tr from-blue-800 to-amber-400 text-white font-bold p-4 rounded-lg shadow-lg mb-4 flex items-center gap-2">
                        <i data-feather="aperture" class="text-white"></i>
                        ADMINISTRAÇÃO PÚBLICA
                    </div>
                    <div class="w-2 h-8 bg-slate-400"></div>
                    <!-- Linha de Divisão -->
                    <div class="flex w-full max-w-5xl items-stretch">
                        <div class="diagram-connector"></div>
                        <div class="flex flex-col items-center">
                            <div class="w-2 h-4 bg-slate-400"></div>
                            <div class="h-2 w-4 bg-slate-400"></div>
                            <div class="w-2 h-4 bg-slate-400"></div>
                        </div>
                        <div class="diagram-connector"></div>
                    </div>
                    <!-- Blocos Principais -->
                    <div class="w-full max-w-5xl grid grid-cols-1 md:grid-cols-3 gap-8 mt-2">
                        <div class="diagram-box tooltip" onclick="showModal('direta')">
                            <i data-feather="users" class="mx-auto mb-2 text-blue-800"></i>
                            <h3 class="font-bold text-xl text-blue-800">Administração Direta</h3>
                            <p class="text-sm text-slate-600 mt-1">O núcleo do Estado, composto pelos órgãos dos entes federativos (União, Estados, DF, Municípios).</p>
                            <span class="tooltip-text">Clique para ver exemplos e detalhes</span>
                        </div>
                        <div class="diagram-box tooltip" onclick="showModal('indireta')">
                            <i data-feather="share-2" class="mx-auto mb-2 text-blue-800"></i>
                            <h3 class="font-bold text-xl text-blue-800">Administração Indireta</h3>
                            <p class="text-sm text-slate-600 mt-1">Entidades com personalidade jurídica própria, criadas para executar serviços de forma descentralizada.</p>
                            <span class="tooltip-text">Clique para ver exemplos e detalhes</span>
                        </div>
                        <div class="diagram-box tooltip" onclick="showModal('terceiro_setor')">
                            <i data-feather="heart" class="mx-auto mb-2 text-blue-800"></i>
                            <h3 class="font-bold text-xl text-blue-800">Terceiro Setor</h3>
                            <p class="text-sm text-slate-600 mt-1">Entidades privadas sem fins lucrativos que colaboram com o Estado em atividades de interesse público.</p>
                            <span class="tooltip-text">Clique para ver exemplos e detalhes</span>
                        </div>
                    </div>
                </div>
            </section>
            <!-- SEÇÃO PRINCÍPIOS -->
            <section id="principios" class="content-section">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold mb-2">Princípios Constitucionais da Administração Pública</h2>
                    <p class="max-w-3xl mx-auto text-slate-600">O artigo 37 da Constituição Federal estabelece os cinco princípios fundamentais que regem toda a atuação administrativa, conhecidos pelo acrônimo LIMPE. Clique em cada cartão para ver a sua definição e exemplos práticos.</p>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6">
                    <!-- Cards dos Princípios -->
                </div>
            </section>
            <!-- SEÇÃO COMPARATIVO INTERATIVO -->
            <section id="comparativo" class="content-section">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold mb-2">Comparativo Interativo da Administração Indireta</h2>
                    <p class="max-w-3xl mx-auto text-slate-600">A Administração Indireta é composta por quatro tipos de entidades. Use as caixas de seleção abaixo para compará-las na tabela e no gráfico. Esta ferramenta permite visualizar as diferenças cruciais de regime jurídico, capital, foro e outros aspectos.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <div id="checkbox-container" class="flex flex-wrap justify-center gap-4 mb-6 pb-4 border-b">
                        <!-- Checkboxes serão inseridos aqui -->
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="overflow-x-auto">
                            <table id="comparison-table" class="min-w-full divide-y divide-slate-200">
                                <!-- Tabela será gerada aqui -->
                            </table>
                        </div>
                        <div class="chart-container">
                            <canvas id="comparison-chart"></canvas>
                            <div class="text-xs text-slate-500 text-center mt-2">* O gráfico é ilustrativo: valores numéricos representam aproximações qualitativas para facilitar a comparação visual.</div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- SEÇÃO TÉCNICAS DE ORGANIZAÇÃO -->
            <section id="conceitos" class="content-section">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold mb-2">Técnicas de Organização Administrativa</h2>
                    <p class="max-w-3xl mx-auto text-slate-600">Para cumprir suas funções, o Estado utiliza técnicas para distribuir competências e tarefas. As principais são a Descentralização/Centralização e a Desconcentração/Concentração. Entender essa diferença é fundamental.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-amber-500">
                        <h3 class="font-bold text-xl mb-3 flex items-center gap-2"><i data-feather="shuffle" class="text-amber-500"></i>Descentralização vs. Centralização</h3>
                        <p class="text-slate-600">A <strong class="text-slate-800">Descentralização</strong> ocorre quando o Estado transfere a execução de um serviço para <strong class="text-slate-800">outra pessoa jurídica</strong> (pública ou privada), que comporá a Administração Indireta. Há duas pessoas jurídicas distintas. A <strong class="text-slate-800">Centralização</strong> é a execução de tarefas pelo próprio ente político, através de seus órgãos internos.</p>
                        <div class="mt-3 text-xs text-slate-500">Exemplo: A criação do INSS (autarquia) para gerir a previdência é descentralização. Um ministério cuidando diretamente seria centralização.</div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-sky-500">
                        <h3 class="font-bold text-xl mb-3 flex items-center gap-2"><i data-feather="git-branch" class="text-sky-500"></i>Desconcentração vs. Concentração</h3>
                        <p class="text-slate-600">A <strong class="text-slate-800">Desconcentração</strong> é um fenômeno <strong class="text-slate-800">interno</strong> a uma mesma pessoa jurídica. É a distribuição de competências entre vários <strong class="text-slate-800">órgãos</strong> dentro da mesma entidade para otimizar o serviço. Existe hierarquia. A <strong class="text-slate-800">Concentração</strong> é o movimento inverso, extinguindo órgãos e centralizando as tarefas.</p>
                        <div class="mt-3 text-xs text-slate-500">Exemplo: Um ministério criando secretarias regionais (desconcentração) ou extinguindo-as (concentração).</div>
                    </div>
                </div>
            </section>
            <!-- DICAS DE ESTUDO -->
            <section class="mt-12">
                <div class="study-tips rounded-lg p-6 shadow-md max-w-3xl mx-auto">
                    <h3 class="font-bold text-lg mb-2 flex items-center gap-2"><i data-feather="book-open" class="text-amber-500"></i>Dicas de Estudo</h3>
                    <ul class="list-disc list-inside text-slate-700 space-y-1">
                        <li>Use o comparativo interativo para fixar as diferenças entre entidades.</li>
                        <li>Revise os princípios LIMPE com exemplos práticos para cada um.</li>
                        <li>Monte mapas mentais a partir do diagrama da Visão Geral.</li>
                        <li>Pratique questões de concursos sobre descentralização e desconcentração.</li>
                        <li>Volte a esta página para revisões rápidas antes da prova!</li>
                    </ul>
                </div>
            </section>
        </main>
    </div>
    <!-- MODAL -->
    <div id="modal" class="modal-overlay hidden" aria-modal="true" role="dialog">
        <div class="modal-content">
            <button onclick="closeModal()" class="close-modal-btn" aria-label="Fechar modal"><i data-feather="x"></i></button>
            <div id="modal-body"></div>
        </div>
    </div>
<script>
const contentData = {
    direta: {
        title: "Administração Direta",
        body: `
            <p class="mb-4">É o conjunto de órgãos que integram a estrutura dos entes políticos da Federação (União, Estados, Distrito Federal e Municípios), atuando de forma centralizada. Esses órgãos <strong>não possuem personalidade jurídica própria</strong>; são meras repartições de competências da pessoa jurídica a que pertencem.</p>
            <h4 class="font-bold mt-4 mb-2">Características Principais:</h4>
            <ul class="list-disc list-inside space-y-2">
                <li><strong>Composição:</strong> Órgãos da Presidência da República, Ministérios, Governadorias, Secretarias, Prefeituras.</li>
                <li><strong>Personalidade Jurídica:</strong> Os órgãos não têm. A personalidade é do ente federativo (União, Estado, etc.).</li>
                <li><strong>Teoria do Órgão:</strong> A vontade do agente público é imputada ao órgão e, consequentemente, ao Estado.</li>
                <li><strong>Atuação:</strong> Centralizada, com distribuição interna de competências por meio da <strong>desconcentração</strong>.</li>
            </ul>
            <div class="mt-4 p-3 bg-blue-50 rounded text-blue-800 text-sm"><i data-feather='info' class='inline mr-1'></i>Exemplo: Ministérios, Secretarias Estaduais, Prefeituras.</div>
        `
    },
    indireta: {
        title: "Administração Indireta",
        body: `
            <p class="mb-4">É o conjunto de pessoas jurídicas, de direito público ou privado, criadas pelo Estado para desempenhar, de forma descentralizada, atividades administrativas, de serviço público ou econômicas. Elas possuem autonomia, mas são vinculadas à Administração Direta, que exerce sobre elas um controle finalístico (tutela).</p>
            <h4 class="font-bold mt-4 mb-2">Componentes:</h4>
            <ul class="list-disc list-inside space-y-2">
                <li><strong>Autarquias:</strong> Pessoas jurídicas de direito público, criadas por lei, para executar atividades típicas de Estado (Ex: INSS, BACEN).</li>
                <li><strong>Fundações Públicas:</strong> Podem ser de direito público ou privado, voltadas a atividades de interesse social (Ex: IBGE, FUNAI).</li>
                <li><strong>Empresas Públicas:</strong> Pessoas jurídicas de direito privado, com capital 100% público, que prestam serviço público ou exploram atividade econômica (Ex: Correios, Caixa).</li>
                <li><strong>Sociedades de Economia Mista:</strong> Pessoas jurídicas de direito privado, com capital misto (maioria pública votante), que atuam de forma semelhante às empresas públicas (Ex: Petrobras, Banco do Brasil).</li>
            </ul>
            <div class="mt-4 p-3 bg-blue-50 rounded text-blue-800 text-sm"><i data-feather='info' class='inline mr-1'></i>Exemplo: INSS, IBGE, Correios, Petrobras.</div>
            <p class="mt-4">Para uma análise detalhada, utilize o <strong>Comparativo Interativo</strong> na navegação principal.</p>
        `
    },
    terceiro_setor: {
        title: "Terceiro Setor (Entidades Paraestatais)",
        body: `
            <p class="mb-4">Composto por pessoas jurídicas de direito privado, sem fins lucrativos, que atuam ao lado do Estado em atividades de interesse social. Elas <strong>não integram a Administração Pública</strong>, mas colaboram com ela mediante fomento público.</p>
            <h4 class="font-bold mt-4 mb-2">Figuras Principais:</h4>
            <ul class="list-disc list-inside space-y-2">
                <li><strong>Organizações Sociais (OS):</strong> Entidades privadas que recebem uma qualificação do Poder Público para gerir serviços públicos (ex: hospitais, museus) através de um <strong>Contrato de Gestão</strong>.</li>
                <li><strong>Organizações da Sociedade Civil de Interesse Público (OSCIP):</strong> Entidades privadas qualificadas para receber fomento e executar projetos de interesse público através de um <strong>Termo de Parceria</strong>.</li>
                <li><strong>Serviços Sociais Autônomos (Sistema S):</strong> Entidades como SESI, SENAI, SESC, criadas por lei, mantidas por contribuições parafiscais, com regime de direito privado, mas voltadas a fins sociais e de apoio a categorias profissionais.</li>
            </ul>
            <div class="mt-4 p-3 bg-amber-50 rounded text-amber-800 text-sm"><i data-feather='info' class='inline mr-1'></i>Exemplo: APAE, Santa Casa, SENAI, OSCIP ambiental.</div>
        `
    },
    principios: [
        { initial: "L", name: "Legalidade", description: "O administrador público só pode fazer o que a lei determina ou autoriza. A lei é o fundamento e o limite de toda a ação administrativa.", exemplo: "Exemplo: Um servidor só pode conceder benefício se houver previsão legal." },
        { initial: "I", name: "Impessoalidade", description: "A atuação administrativa deve visar o interesse público, tratando todos com isonomia, sem favoritismos ou perseguições. Os atos são do órgão, não do agente.", exemplo: "Exemplo: Proibir promoção pessoal de autoridades em campanhas públicas." },
        { initial: "M", name: "Moralidade", description: "Exige um comportamento ético, honesto e probo. Um ato pode ser legal, mas será inválido se for imoral.", exemplo: "Exemplo: Nepotismo é imoral, mesmo que não haja lei específica proibindo." },
        { initial: "P", name: "Publicidade", description: "A regra é a transparência. Os atos administrativos devem ser divulgados oficialmente para produzir efeitos e permitir o controle social.", exemplo: "Exemplo: Publicação de editais de concurso e licitações." },
        { initial: "E", name: "Eficiência", description: "A Administração deve agir com presteza, perfeição e rendimento funcional, buscando os melhores resultados com o uso racional dos recursos públicos.", exemplo: "Exemplo: Digitalização de processos para agilizar o atendimento ao cidadão." },
    ]
};
const comparativoData = {
    caracteristicas: [
        "Personalidade Jurídica", "Criação", "Capital", "Forma Societária", "Regime de Pessoal", "Foro (Federal)", "Finalidade"
    ],
    entidades: {
        autarquia: {
            nome: "Autarquia",
            valores: ["Direito Público", "Criada por Lei", "100% Público", "N/A", "Estatutário (RJU)", "Justiça Federal", "Atividade Típica de Estado"],
            cor: 'rgba(59, 130, 246, 0.7)'
        },
        fundacao: {
            nome: "Fundação Pública",
            valores: ["Público ou Privado", "Autorizada por Lei", "100% Público", "N/A", "Estatutário ou CLT", "Depende (Federal se de Dir. Público)", "Atividade Social"],
            cor: 'rgba(16, 185, 129, 0.7)'
        },
        empresa_publica: {
            nome: "Empresa Pública",
            valores: ["Direito Privado", "Autorizada por Lei", "100% Público", "Qualquer", "CLT (concurso)", "Justiça Federal", "Serv. Público / Ativ. Econômica"],
            cor: 'rgba(239, 68, 68, 0.7)'
        },
        sem: {
            nome: "Sociedade de Economia Mista",
            valores: ["Direito Privado", "Autorizada por Lei", "Misto (Controle Público)", "S.A. (Obrigatório)", "CLT (concurso)", "Justiça Estadual (Regra)", "Serv. Público / Ativ. Econômica"],
            cor: 'rgba(245, 158, 11, 0.7)'
        }
    }
};
let comparisonChart;
document.addEventListener('DOMContentLoaded', () => {
    feather.replace();
    const navButtons = document.querySelectorAll('.nav-button');
    const sections = document.querySelectorAll('.content-section');
    navButtons.forEach(button => {
        button.addEventListener('click', () => {
            const targetId = button.dataset.target;
            navButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            sections.forEach(section => {
                section.classList.remove('active');
                if (section.id === targetId) {
                    section.classList.add('active');
                }
            });
        });
    });
    setupPrincipios();
    setupComparativo();
    updateComparisonTable();
});
function setupPrincipios() {
    const container = document.querySelector('#principios .grid');
    container.innerHTML = contentData.principios.map(p => `
        <div class="concept-card bg-white p-6 rounded-lg shadow-md border-l-4 border-amber-500 cursor-pointer" tabindex="0" aria-label="${p.name}" onclick="this.querySelector('.description').classList.toggle('hidden'); this.querySelector('.exemplo').classList.toggle('hidden')" onkeydown="if(event.key==='Enter'){this.click();}">
            <div class="flex items-center mb-3">
                <span class="bg-amber-500 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold text-xl mr-4">${p.initial}</span>
                <h3 class="font-bold text-xl">${p.name}</h3>
            </div>
            <p class="text-slate-600 description hidden mt-4">${p.description}</p>
            <div class="exemplo hidden mt-2 text-xs text-amber-700"><i data-feather='lightbulb' class='inline mr-1'></i>${p.exemplo}</div>
        </div>
    `).join('');
    feather.replace();
}
function setupComparativo() {
    const checkboxContainer = document.getElementById('checkbox-container');
    Object.keys(comparativoData.entidades).forEach((key, index) => {
        const entidade = comparativoData.entidades[key];
        const checkbox = `
            <label class="inline-flex items-center">
                <input type="checkbox" class="form-checkbox h-5 w-5 rounded" data-entidade="${key}" ${index < 2 ? 'checked' : ''} onchange="updateComparisons()">
                <span class="ml-2 text-slate-700 font-medium">${entidade.nome}</span>
            </label>
        `;
        checkboxContainer.innerHTML += checkbox;
    });
    updateComparisons();
}
function updateComparisons() {
    updateComparisonTable();
    updateComparisonChart();
}
function updateComparisonTable() {
    const table = document.getElementById('comparison-table');
    const checkboxes = document.querySelectorAll('#checkbox-container input:checked');
    const selectedKeys = Array.from(checkboxes).map(cb => cb.dataset.entidade);
    let headerHtml = '<thead class="bg-slate-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Critério</th>';
    selectedKeys.forEach(key => {
        headerHtml += `<th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">${comparativoData.entidades[key].nome}</th>`;
    });
    headerHtml += '</tr></thead>';
    let bodyHtml = '<tbody class="bg-white divide-y divide-slate-200">';
    comparativoData.caracteristicas.forEach((caracteristica, i) => {
        bodyHtml += '<tr>';
        bodyHtml += `<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900">${caracteristica}</td>`;
        selectedKeys.forEach(key => {
            bodyHtml += `<td class="px-6 py-4 whitespace-normal text-sm text-slate-600">${comparativoData.entidades[key].valores[i]}</td>`;
        });
        bodyHtml += '</tr>';
    });
    bodyHtml += '</tbody>';
    table.innerHTML = headerHtml + bodyHtml;
}
function updateComparisonChart() {
    const ctx = document.getElementById('comparison-chart').getContext('2d');
    const checkboxes = document.querySelectorAll('#checkbox-container input:checked');
    const selectedKeys = Array.from(checkboxes).map(cb => cb.dataset.entidade);
    const datasets = selectedKeys.map(key => {
        const entidade = comparativoData.entidades[key];
        return {
            label: entidade.nome,
            data: entidade.valores.map(v => {
                if (v.includes("Público")) return 3;
                if (v.includes("Misto") || v.includes("Híbrido") || v.includes("Depende")) return 2;
                if (v.includes("Privado") || v.includes("CLT") || v.includes("Estadual")) return 1;
                return 1.5; // for N/A or text values
            }),
            backgroundColor: entidade.cor.replace('0.7', '0.2'),
            borderColor: entidade.cor,
            pointBackgroundColor: entidade.cor,
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: entidade.cor
        };
    });
    if (comparisonChart) {
        comparisonChart.destroy();
    }
    comparisonChart = new Chart(ctx, {
        type: 'radar',
        data: {
            labels: comparativoData.caracteristicas,
            datasets: datasets
        },
        options: {
            maintainAspectRatio: false,
            scales: {
                r: {
                    angleLines: { display: true },
                    suggestedMin: 0,
                    suggestedMax: 3.5,
                    ticks: {
                        display: false,
                        stepSize: 1
                    },
                    pointLabels: {
                        font: { size: 11 }
                    }
                }
            },
            plugins: {
                legend: {
                    position: 'top',
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.dataset.label || '';
                            if (label) {
                                label += ': ';
                            }
                            const originalValue = comparativoData.entidades[selectedKeys[context.datasetIndex]].valores[context.dataIndex];
                            label += originalValue;
                            return label;
                        }
                    }
                }
            }
        }
    });
}
function showModal(contentKey) {
    const modal = document.getElementById('modal');
    const modalBody = document.getElementById('modal-body');
    const content = contentData[contentKey];
    modalBody.innerHTML = `
        <h2 class="text-2xl font-bold mb-4">${content.title}</h2>
        ${content.body}
    `;
    feather.replace();
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
    setTimeout(() => {
        document.querySelector('.close-modal-btn').focus();
    }, 100);
}
function closeModal() {
    const modal = document.getElementById('modal');
    modal.classList.add('hidden');
    document.body.style.overflow = '';
}
window.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') closeModal();
});
</script>
</body>
</html>
